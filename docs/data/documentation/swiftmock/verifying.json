{"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/swiftmock\/verifying"]}],"sections":[],"hierarchy":{"paths":[["doc:\/\/SwiftMock\/documentation\/SwiftMock"]]},"abstract":[{"type":"text","text":"This article describes in detail the available possibilities of the "},{"isActive":true,"type":"reference","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/verify(_:times:)"},{"type":"text","text":" method."}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/Verifying"},"metadata":{"title":"Verifying","modules":[{"name":"SwiftMock"}],"role":"article","roleHeading":"Article"},"schemaVersion":{"patch":0,"major":0,"minor":3},"seeAlsoSections":[{"identifiers":["doc:\/\/SwiftMock\/documentation\/SwiftMock\/Introduction","doc:\/\/SwiftMock\/documentation\/SwiftMock\/Stubbing","doc:\/\/SwiftMock\/documentation\/SwiftMock\/Argument-Matchers"],"title":"Usage","generated":true}],"kind":"article","primaryContentSections":[{"kind":"content","content":[{"text":"Overview","level":2,"type":"heading","anchor":"Overview"},{"inlineContent":[{"type":"text","text":"When we work with mocks we want to have some flexibility in our capabilities. Let’s look at the package’s capabilities."}],"type":"paragraph"},{"anchor":"Checking-that-method-was-called","level":3,"text":"Checking that method was called","type":"heading"},{"inlineContent":[{"type":"text","text":"To verify that the mock method was called, use the "},{"identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/verify(_:times:)","isActive":true,"type":"reference"},{"type":"text","text":" method and pass the mock object as the first argument. This method will create a "},{"type":"codeVoice","code":"Verify"},{"type":"text","text":" structure for you that has the same methods as your protocol. You can call any method from the protocol methods to check that the method has currently been called."}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["@Mock","public protocol AlbumService {","\tfunc getAlbumName(id: String) async throws -> String","}","","","func test() {","\tlet mock = AlbumServiceMock()","","\twhen(mock.$getAlbumName())","\t\t.thenReturn(\"#4\")","","\t_ = mock.getAlbumName(id: \"id1\")","","\tverify(mock).getAlbumName()","}"]},{"inlineContent":[{"type":"text","text":"By default, verify checks that the method was called exactly one time. If the method was called more than once, you will receive an error."}],"type":"paragraph"},{"text":"Checking that method was called with specific arguments","type":"heading","level":3,"anchor":"Checking-that-method-was-called-with-specific-arguments"},{"inlineContent":[{"text":"The methods of a ","type":"text"},{"type":"codeVoice","code":"Verify"},{"type":"text","text":" structure have all the same methods as your protocol with one exception. All method arguments are replaced with a wrapper in the form of "},{"identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/ArgumentMatcher","type":"reference","isActive":true},{"text":". As with stubbing, the default argument value is ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/any()"},{"type":"text","text":". If you want to check that a method was called with a certain argument, then you need to specify the appropriate "},{"isActive":true,"identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/ArgumentMatcher","type":"reference"},{"text":" for the arguments you want to check.","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["@Mock","public protocol AlbumService {","\tfunc getAlbumName(id: String) async throws -> String","}","","","func test() {","\tlet mock = AlbumServiceMock()","","\twhen(mock.$getAlbumName())","\t\t.thenReturn(\"#4\")","","\t_ = mock.getAlbumName(id: \"id1\")","","\t\/\/ This test fail, because we don't have ","\t\/\/ mock.getAlbumName(id: \"id2\") in out test. ","\tverify(mock).getAlbumName(id: eq(\"id2\")) ","}"],"syntax":"swift"},{"text":"Checking that method was called specific times","type":"heading","level":3,"anchor":"Checking-that-method-was-called-specific-times"},{"inlineContent":[{"type":"text","text":"The "},{"isActive":true,"type":"reference","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/verify(_:times:)"},{"text":" method can check not only that the method was called once, but also a specific number of times. The ","type":"text"},{"type":"codeVoice","code":"times"},{"text":" parameter of the ","type":"text"},{"identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/verify(_:times:)","isActive":true,"type":"reference"},{"type":"text","text":" method is used for this. This parameter type is "},{"type":"reference","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/TimesMatcher","isActive":true},{"type":"text","text":" and you can use "},{"type":"reference","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/times(_:)","isActive":true},{"text":", ","type":"text"},{"type":"reference","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/never()","isActive":true},{"text":", ","type":"text"},{"type":"reference","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/atLeast(_:)","isActive":true},{"type":"text","text":", "},{"type":"reference","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/atMost(_:)","isActive":true},{"text":" as examples, or create your own.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The following example checks that the method has been called at least twice."}]},{"code":["@Mock","public protocol AlbumService {","\tfunc getAlbumName(id: String) async throws -> String","}","","","func test() {","\tlet mock = AlbumServiceMock()","","\twhen(mock.$getAlbumName())","\t\t.thenReturn(\"#4\")","\t\t.thenReturn(\"Inspiration Is Dead\")","","\t_ = mock.getAlbumName(id: \"id1\")","\t_ = mock.getAlbumName(id: \"id2\")","","\tverify(mock, times: atLeast(2)).getAlbumName() ","}"],"type":"codeListing","syntax":"swift"}]}],"references":{"doc://SwiftMock/documentation/SwiftMock/any()":{"url":"\/documentation\/swiftmock\/any()","type":"topic","kind":"symbol","title":"any()","role":"symbol","abstract":[{"type":"text","text":"Any possible value is suitable."}],"fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"any","kind":"identifier"},{"kind":"text","text":"<"},{"text":"Arguments","kind":"genericParameter"},{"kind":"text","text":">() -> "},{"preciseIdentifier":"s:9SwiftMock15ArgumentMatchera","kind":"typeIdentifier","text":"ArgumentMatcher"},{"text":"<","kind":"text"},{"text":"Arguments","kind":"typeIdentifier"},{"kind":"text","text":">"}],"identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/any()"},"doc://SwiftMock/documentation/SwiftMock/TimesMatcher":{"abstract":[{"type":"text","text":"A function type that tests the function call count."}],"url":"\/documentation\/swiftmock\/timesmatcher","role":"symbol","title":"TimesMatcher","type":"topic","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/TimesMatcher","kind":"symbol","fragments":[{"kind":"keyword","text":"typealias"},{"text":" ","kind":"text"},{"text":"TimesMatcher","kind":"identifier"}],"navigatorTitle":[{"text":"TimesMatcher","kind":"identifier"}]},"doc://SwiftMock/documentation/SwiftMock":{"title":"SwiftMock","abstract":[{"type":"text","text":"A package to simplify writing tests by automating the process of creating mock objects."}],"url":"\/documentation\/swiftmock","type":"topic","kind":"symbol","role":"collection","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock"},"doc://SwiftMock/documentation/SwiftMock/verify(_:times:)":{"url":"\/documentation\/swiftmock\/verify(_:times:)","kind":"symbol","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/verify(_:times:)","abstract":[],"role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"verify","kind":"identifier"},{"text":"<","kind":"text"},{"kind":"genericParameter","text":"Mock"},{"text":">(","kind":"text"},{"text":"Mock","kind":"typeIdentifier"},{"kind":"text","text":", "},{"text":"times","kind":"externalParam"},{"kind":"text","text":": "},{"preciseIdentifier":"s:9SwiftMock12TimesMatchera","kind":"typeIdentifier","text":"TimesMatcher"},{"text":") -> ","kind":"text"},{"text":"Mock","kind":"typeIdentifier"},{"kind":"text","text":"."},{"text":"Verify","kind":"typeIdentifier"}],"title":"verify(_:times:)","type":"topic"},"doc://SwiftMock/documentation/SwiftMock/ArgumentMatcher":{"fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ArgumentMatcher","kind":"identifier"}],"navigatorTitle":[{"kind":"identifier","text":"ArgumentMatcher"}],"role":"symbol","type":"topic","title":"ArgumentMatcher","abstract":[{"text":"A function type that tests the value of an argument to a called function.","type":"text"}],"identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/ArgumentMatcher","url":"\/documentation\/swiftmock\/argumentmatcher","kind":"symbol"},"doc://SwiftMock/documentation/SwiftMock/never()":{"abstract":[{"text":"Checks that method wasn’t called.","type":"text"}],"url":"\/documentation\/swiftmock\/never()","role":"symbol","title":"never()","type":"topic","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/never()","kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"never","kind":"identifier"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"TimesMatcher","preciseIdentifier":"s:9SwiftMock12TimesMatchera"}]},"doc://SwiftMock/documentation/SwiftMock/Stubbing":{"identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/Stubbing","title":"Stubbing","abstract":[{"type":"text","text":"This article describes in detail the available possibilities of the stubbing method."}],"url":"\/documentation\/swiftmock\/stubbing","kind":"article","role":"article","type":"topic"},"doc://SwiftMock/documentation/SwiftMock/atMost(_:)":{"abstract":[{"text":"Checks that method was called at most ","type":"text"},{"code":"count","type":"codeVoice"},{"text":" times.","type":"text"}],"url":"\/documentation\/swiftmock\/atmost(_:)","role":"symbol","title":"atMost(_:)","type":"topic","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/atMost(_:)","kind":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"atMost"},{"text":"(","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:Si","text":"Int"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"TimesMatcher","preciseIdentifier":"s:9SwiftMock12TimesMatchera"}]},"doc://SwiftMock/documentation/SwiftMock/Introduction":{"identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/Introduction","title":"Introduction","abstract":[{"type":"text","text":"First steps in protocol mocking."}],"url":"\/documentation\/swiftmock\/introduction","kind":"article","role":"article","type":"topic"},"doc://SwiftMock/documentation/SwiftMock/Argument-Matchers":{"abstract":[{"type":"text","text":"This article talks about how Argument Matcher works."}],"kind":"article","title":"Argument Matchers","url":"\/documentation\/swiftmock\/argument-matchers","type":"topic","role":"article","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/Argument-Matchers"},"doc://SwiftMock/documentation/SwiftMock/atLeast(_:)":{"abstract":[{"text":"Checks that method was calles at least ","type":"text"},{"type":"codeVoice","code":"count"},{"text":" times.","type":"text"}],"url":"\/documentation\/swiftmock\/atleast(_:)","role":"symbol","title":"atLeast(_:)","type":"topic","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/atLeast(_:)","kind":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"atLeast"},{"kind":"text","text":"("},{"preciseIdentifier":"s:Si","text":"Int","kind":"typeIdentifier"},{"kind":"text","text":") -> "},{"text":"TimesMatcher","preciseIdentifier":"s:9SwiftMock12TimesMatchera","kind":"typeIdentifier"}]},"doc://SwiftMock/documentation/SwiftMock/times(_:)":{"abstract":[{"text":"Checks that method was called exactly ","type":"text"},{"type":"codeVoice","code":"count"},{"type":"text","text":" times."}],"url":"\/documentation\/swiftmock\/times(_:)","role":"symbol","title":"times(_:)","type":"topic","identifier":"doc:\/\/SwiftMock\/documentation\/SwiftMock\/times(_:)","kind":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"times"},{"text":"(","kind":"text"},{"text":"Int","kind":"typeIdentifier","preciseIdentifier":"s:Si"},{"text":") -> ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:9SwiftMock12TimesMatchera","text":"TimesMatcher"}]}}}